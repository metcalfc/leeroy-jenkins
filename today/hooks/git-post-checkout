#!/usr/bin/env bash
#
# Leeroy - Git post-checkout Hook
# Clears session when switching branches

set -euo pipefail

readonly BRANCH_CHECKOUT="$3"  # 1 = branch checkout, 0 = file checkout
readonly SESSION_TRACKER="${HOME}/.leeroy/hooks/session-tracker.sh"

# Only clear on branch checkout, not file checkout
[[ "${BRANCH_CHECKOUT}" != "1" ]] && exit 0

[[ -x "${SESSION_TRACKER}" ]] && "${SESSION_TRACKER}" clear 2>/dev/null || true

exit 0
